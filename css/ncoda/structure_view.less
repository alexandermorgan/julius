// -*- coding: utf-8 -*-
//-------------------------------------------------------------------------------------------------
// Program Name:           Julius
// Program Description:    User interface for the nCoda music notation editor.
//
// Filename:               css/ncoda/structure_view.less
// Purpose:                LESS file for StructureView
//
// Copyright (C) 2015 Christopher Antila
//
// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU Affero General Public License as
// published by the Free Software Foundation, either version 3 of the
// License, or (at your option) any later version.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU Affero General Public License for more details.
//
// You should have received a copy of the GNU Affero General Public License
// along with this program.  If not, see <http://www.gnu.org/licenses/>.
//-------------------------------------------------------------------------------------------------

@import "height_of_global_menubar.less";
@import "colours.less";

/*************************************************************************************************/
/* StructureView colour definitions */
@strv-widget-background: @solarized-base2;
@strv-widget-border: @solarized-base2;
@strv-widget-shadow: @solarized-base0;
@strv-inner-line: @solarized-base1;  // a line in a widget
@strv-text: @solarized-base0;
// highlighting colours
@strv-primary: @solarized-blue;
@strv-secondary: @solarized-cyan;
@strv-tertiary: @solarized-violet;
@strv-quaternary: @solarized-magenta;


/*************************************************************************************************/
/* Shared stuff */

#nc-strv-frame {
    /* This contains the menus and #nc-structureview. It exists basically to ensure that the
     * menus don't interfere with the StructureView flexbox layout.
     */
    flex: 1 1 0%;
    background: @solarized-base02;
    display: flex;
    flex-flow: column;
    align-items: stretch;
}

#nc-strv-corner-menus {
    z-index: 500;
    flex: 0 0 0;
}

#nc-strv-view {
    z-index: 250;
    flex: 1 1 auto;
    display: flex;
    flex-flow: column;
    justify-content: space-around;
    align-items: center;
}


/*************************************************************************************************/
/* active section <article> */
.ncoda-active-sections {
    z-index: 1;
    background: @strv-widget-background;
    border: 0.1rem solid @strv-widget-border;
    box-shadow: 0 0 1rem @strv-widget-shadow;
    border-radius: 0.5rem;
}
.ncoda-active-sections > header {
    height: 2rem;
    text-align: center;
    font-size: x-large;
}
.ncoda-active-sections > content {
    padding: 1rem;
    display: flex;
    flex-flow: row nowrap;
    justify-content: center;
    align-items: stretch;
}

/*************************************************************************************************/
/* <article> corresponding to an MEI <section> */
.nc-strv-section {
    display: flex;
    background: @strv-widget-background;
    border: 0.1rem solid @strv-inner-line;
    border-top: 0.35rem solid @strv-widget-background;
    z-index: 3;

    flex-flow: column nowrap;
    justify-content: space-between;
    transition: border-top 0.25s;
}

.nc-strv-section header {
    padding: 0.25rem;
    border-top: 0.1rem solid @strv-inner-line;
    display: flex;
    flex-flow: row;
    justify-content: space-between;
}
.nc-strv-section header span { flex: 1 0; }
.ncoda-section-colour { flex: 6 1; }

.nc-strv-section footer { margin: 0.4rem; }
.nc-strv-section time { font-size: smaller; }
.nc-strv-section:hover { border-top-color: @strv-primary; }
.nc-strv-section-img { flex: 1; width: 10rem; display: block; overflow: hidden; }
.nc-strv-section img { width: 100%; }

/* context menu when clicking on a <section>-corresponding <article> */
#ncoda-section-menu {
    display: none;
    position: absolute;
    z-index: 251;  // just above the corner menus
}
#ncoda-section-menu a {
    cursor: default;
}

/*************************************************************************************************/
/* StructureView Corner Menus */
.nc-strv-menu {
    background: @strv-widget-background;
    display: flex;
    flex-flow: column;
    justify-content: flex-start;
    position: absolute;
    max-width: 80%;
    max-height: 80%;
}
.nc-strv-menu .header {
    cursor: default;
    padding: 0.4rem 0.5rem 0.5rem;
    margin: 0;
    display: flex;
    flex-flow: row;
    justify-content: space-between;
    align-items: center;
}
.nc-strv-menu .header span {
    margin: 0 1rem 0 0.5rem;
}
.nc-strv-menu > ul {
    margin: 0;
    list-style-type: none;
    padding: 0.2rem;
}
.nc-strv-menu li {
    margin-top: 0.2rem;
    border-right: 1px solid @strv-widget-background;
    border-bottom: 1px solid @strv-widget-background;
    padding: 0.2rem 0.5rem;
}
.nc-strv-menu li:hover {
    border-right-color: @strv-primary;
    border-bottom-color: @strv-primary;
}

/* The "show or hide" button */
.show-or-hide-button {
    background: inherit;
    border: 0.1rem solid @strv-primary;
    border-radius: 0.2rem;
    color: @strv-primary;
}
.show-or-hide-button:hover {
    border-color: @strv-secondary;
    color: @strv-secondary;
}

//////////////////////////////////////////////////////////
// Header Bar
#nc-strv-header-bar {
    top: @global-menubar-height;
    left: 0;
}

//////////////////////////////////////////////////////////
// Expanded Section View
#nc-strv-expanded-section {
    top: @global-menubar-height;
    right: 0;
}
#ncoda-expanded-section-svg h2 {
    margin: 0;
    padding: 0.25rem 0.5rem;
    background: rgba(0, 191, 255, 0.6);
}
#ncoda-expanded-section-svg img {
    width: 100%;
    padding: 0.5rem 0 0.5rem 0.5rem;
}


//////////////////////////////////////////////////////////
// Collaborators
#nc-strv-collaboration {
    bottom: 0;
    right: 0;
}
#nc-strv-collaboration address {
    border-bottom: 1px solid @strv-inner-line;
}
#nc-strv-collaboration > div {
    margin: 1rem;
}
#nc-strv-collaboration ul {
    margin: 0.5rem 0;
    list-style-type: none;
    padding-left: 1rem;
}
#nc-strv-collaboration li:hover {
    border-color: @strv-widget-background;
}


//////////////////////////////////////////////////////////
// Staves Structure
#nc-strv-staves {
    bottom: 0;
    left: 0;
}
#nc-strv-staves > ul {
    overflow-y: scroll;
}
#nc-strv-staves ul {
    list-style-type: none;
    padding-left: 0;
    margin-left: 1rem;
    border-left: 0.2rem solid @strv-primary;
}
#staves-instruments ul {
    padding: 0;
    margin-left: 0;
    border-left: 0.2rem solid @strv-secondary;
}
